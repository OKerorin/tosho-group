<html>
  <head>
    <title>kerotyan-git-test-website</title> 
    <link rel="icon" href="favicon.ico">
  </head>
  <body>
    <p id="p-status"></p>
    <br>
    <input id="input-sid">
    <button onclick="setSID">設定</button>
    <br>
    <br>
    <button onclick="sendDateData">送信</button>
  </body>
</html>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<script>
  const ws = new WebSocket("wss://cloud.achex.ca");
  var sid = "";

  ws.addEventListener("open", (e)=> {
    $("#p-status").html("接続完了");
  });

  function sendDateData() {
    if (sid != "") {
      let nowdate = new Date();
      let strdate = nowdate.getFullYear() + "/" + nowdate.getMonth() + "/" + nowdate.getDate() + " " + nowdate.getHours() + ":" + nowdate.getMinutes() + ":" + nowdate.getSeconds() + ":" + nowdate.getMilliseconds();
      ws.send(JSON.stringify({"toS": sid, "message": strdate}));
      $("#p-status").html("送信完了: " + strdate);
    }
  }

  function setSID() {
    let sidstr = $("#input-sid").val();
    if (isNaN(Number(sidstr)) == false) {
      sid = sidstr;
    }
  }
</script>
